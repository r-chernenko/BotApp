<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–≤</title>
    <script src="https://serratus.github.io/quaggaJS/examples/js/quagga.min.js"></script>
</head>
<body>
    <h2>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞</h2>
    <button onclick="startScanner()">üì∏ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–º–µ—Ä—É</button>
    <video id="scanner" style="width: 100%; max-width: 500px; display: none;"></video>
    <p id="result">–†–µ–∑—É–ª—å—Ç–∞—Ç: <span>-</span></p>

    <script>
        function startScanner() {
            document.getElementById("scanner").style.display = "block";

            Quagga.init({
                inputStream: {
                    name: "Live",
                    type: "LiveStream",
                    target: document.querySelector("#scanner"),
                    constraints: { facingMode: "environment" }
                },
                decoder: { readers: ["ean_reader", "code_128_reader", "qr_reader"] }
            }, function (err) {
                if (!err) {
                    Quagga.start();
                } else {
                    console.error("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Quagga:", err);
                }
            });

            Quagga.onDetected(function (result) {
                document.getElementById("result").innerHTML = "–†–µ–∑—É–ª—å—Ç–∞—Ç: " + result.codeResult.code;
                Quagga.stop();
            });
        }
    </script>
</body>
</html>